admin@DietPi:~$ sudo nano 96addTorService.sh 
admin@DietPi:~$ ./96addTorService.sh 


















































*** Check if TOR service is functional ***
./96addTorService.sh: line 20: [: -gt: unary operator expected
TOR not running ... proceed with switching to TOR.







































































                                                                         ┌────────────────────── WARNING ────────────────────────┐
                                                                         │ At the moment you just can switch TOR on - YOU CANNOT │  
                                                                         │ SWITCH BACK. Do you want to proceed?                  │  
                                                                         │                                                       │  
                                                                         │                                                       │  
                                                                         ├───────────────────────────────────────────────────────┤  
                                                                         │               < Yes >        < No  >                  │  
                                                                         └───────────────────────────────────────────────────────┘  
                                                                           





















*** Adding Tor Sources to sources.list ***
deb http://deb.torproject.org/torproject.org stretch main
deb-src http://deb.torproject.org/torproject.org stretch main
OK

*** Installing dirmngr ***
Reading package lists... Done
Building dependency tree       
Reading state information... Done
dirmngr is already the newest version (2.1.18-8~deb9u3).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
W: Target Sources (main/source/Sources) is configured multiple times in /etc/apt/sources.list:6 and /etc/apt/sources.list:8
W: Target Sources (main/source/Sources) is configured multiple times in /etc/apt/sources.list:6 and /etc/apt/sources.list:10
W: Target Packages (main/binary-armhf/Packages) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:7
W: Target Packages (main/binary-all/Packages) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:7
W: Target Translations (main/i18n/Translation-en_GB) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:7
W: Target Translations (main/i18n/Translation-en) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:7
W: Target Packages (main/binary-armhf/Packages) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:9
W: Target Packages (main/binary-all/Packages) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:9
W: Target Translations (main/i18n/Translation-en_GB) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:9
W: Target Translations (main/i18n/Translation-en) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:9

*** Fetching GPG key ***
uid  deb.torproject.org archive signing key
sig!3        EE8CBC9E886DDD89 2009-09-04  [self-signature]
sig!3        EE8CBC9E886DDD89 2012-08-29  [self-signature]
sig!3        EE8CBC9E886DDD89 2014-08-31  [self-signature]
sig!3        EE8CBC9E886DDD89 2018-08-06  [self-signature]
sub  74A941BA219EC810
sig!         EE8CBC9E886DDD89 2009-09-04  [self-signature]
sig!         EE8CBC9E886DDD89 2012-08-29  [self-signature]
sig!         EE8CBC9E886DDD89 2014-08-31  [self-signature]
sig!         EE8CBC9E886DDD89 2018-08-06  [self-signature]
key EE8CBC9E886DDD89:
2 duplicate signatures removed
82 signatures not checked due to missing keys
gpg: key EE8CBC9E886DDD89: "deb.torproject.org archive signing key" not changed
gpg: Total number processed: 1
gpg:              unchanged: 1
key EE8CBC9E886DDD89:
82 signatures not checked due to missing keys
OK

*** Updating System ***
Hit:1 http://fuzon.co.uk/meveric all InRelease
Hit:2 http://deb.torproject.org/torproject.org stretch InRelease                               
Hit:3 http://fuzon.co.uk/meveric stretch InRelease                                             
Ign:4 https://cdn-aws.deb.debian.org/debian stretch InRelease            
Hit:5 https://cdn-aws.deb.debian.org/debian stretch-updates InRelease
Hit:6 https://cdn-aws.deb.debian.org/debian-security stretch/updates InRelease
Hit:7 https://cdn-aws.deb.debian.org/debian stretch-backports InRelease
Hit:8 https://cdn-aws.deb.debian.org/debian stretch Release
Hit:10 https://oph.mdrjr.net/meveric all InRelease 
Reading package lists... Done 
W: Target Sources (main/source/Sources) is configured multiple times in /etc/apt/sources.list:6 and /etc/apt/sources.list:8
W: Target Sources (main/source/Sources) is configured multiple times in /etc/apt/sources.list:6 and /etc/apt/sources.list:10
W: Target Packages (main/binary-armhf/Packages) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:7
W: Target Packages (main/binary-all/Packages) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:7
W: Target Translations (main/i18n/Translation-en_GB) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:7
W: Target Translations (main/i18n/Translation-en) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:7
W: Target Packages (main/binary-armhf/Packages) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:9
W: Target Packages (main/binary-all/Packages) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:9
W: Target Translations (main/i18n/Translation-en_GB) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:9
W: Target Translations (main/i18n/Translation-en) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:9
W: Target Sources (main/source/Sources) is configured multiple times in /etc/apt/sources.list:6 and /etc/apt/sources.list:8
W: Target Sources (main/source/Sources) is configured multiple times in /etc/apt/sources.list:6 and /etc/apt/sources.list:10
W: Target Packages (main/binary-armhf/Packages) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:7
W: Target Packages (main/binary-all/Packages) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:7
W: Target Translations (main/i18n/Translation-en_GB) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:7
W: Target Translations (main/i18n/Translation-en) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:7
W: Target Packages (main/binary-armhf/Packages) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:9
W: Target Packages (main/binary-all/Packages) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:9
W: Target Translations (main/i18n/Translation-en_GB) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:9
W: Target Translations (main/i18n/Translation-en) is configured multiple times in /etc/apt/sources.list:5 and /etc/apt/sources.list:9

*** Install Tor ***
Reading package lists... Done
Building dependency tree       
Reading state information... Done
tor-arm is already the newest version (1.4.5.0-1.1).
tor is already the newest version (0.3.5.7-1~d90.stretch+1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.

*** Tor Config ***

*** Installing NYX - TOR monitoring Tool ***
Collecting nyx
  Using cached https://files.pythonhosted.org/packages/f4/da/68419425cb0f64f996e2150045c7043c2bb61f77b5928c2156c26a21db88/nyx-2.1.0.tar.gz
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
    ImportError: No module named setuptools
    
    ----------------------------------------
Command "python setup.py egg_info" failed with error code 1 in /tmp/pip-build-MEJi99/nyx/

*** Activating TOR system service ***
ReadWriteDirectories=-/mnt/hdd/tor

*** Waiting for TOR to boostrap ***
--- Checking 1 ---
1548772231
Jan 29 14:30:31.000 [notice] Bootstrapped 0%: Starting
torIsBootstrapped(0)
If this takes too long --> CTRL+c, reboot and check manually
--- Checking 1 ---
1548772236
Jan 29 14:30:31.000 [notice] Bootstrapped 0%: Starting
Jan 29 14:30:32.000 [notice] Bootstrapped 5%: Connecting to directory server
Jan 29 14:30:32.000 [notice] Bootstrapped 10%: Finishing handshake with directory server
Jan 29 14:30:32.000 [notice] Bootstrapped 15%: Establishing an encrypted directory connection
Jan 29 14:30:32.000 [notice] Bootstrapped 20%: Asking for networkstatus consensus
Jan 29 14:30:32.000 [notice] Bootstrapped 25%: Loading networkstatus consensus
Jan 29 14:30:35.000 [notice] Bootstrapped 40%: Loading authority key certs
torIsBootstrapped(0)
If this takes too long --> CTRL+c, reboot and check manually
--- Checking 1 ---
1548772241
Jan 29 14:30:31.000 [notice] Bootstrapped 0%: Starting
Jan 29 14:30:32.000 [notice] Bootstrapped 5%: Connecting to directory server
Jan 29 14:30:32.000 [notice] Bootstrapped 10%: Finishing handshake with directory server
Jan 29 14:30:32.000 [notice] Bootstrapped 15%: Establishing an encrypted directory connection
Jan 29 14:30:32.000 [notice] Bootstrapped 20%: Asking for networkstatus consensus
Jan 29 14:30:32.000 [notice] Bootstrapped 25%: Loading networkstatus consensus
Jan 29 14:30:35.000 [notice] Bootstrapped 40%: Loading authority key certs
Jan 29 14:30:37.000 [notice] Bootstrapped 45%: Asking for relay descriptors for internal paths
Jan 29 14:30:37.000 [notice] Bootstrapped 50%: Loading relay descriptors for internal paths
torIsBootstrapped(0)
If this takes too long --> CTRL+c, reboot and check manually
--- Checking 1 ---
1548772246
Jan 29 14:30:35.000 [notice] Bootstrapped 40%: Loading authority key certs
Jan 29 14:30:37.000 [notice] Bootstrapped 45%: Asking for relay descriptors for internal paths
Jan 29 14:30:37.000 [notice] Bootstrapped 50%: Loading relay descriptors for internal paths
Jan 29 14:30:42.000 [notice] Bootstrapped 57%: Loading relay descriptors
Jan 29 14:30:42.000 [notice] Bootstrapped 65%: Loading relay descriptors
Jan 29 14:30:42.000 [notice] Bootstrapped 72%: Loading relay descriptors
Jan 29 14:30:42.000 [notice] Bootstrapped 80%: Connecting to the Tor network
Jan 29 14:30:42.000 [notice] Bootstrapped 85%: Finishing handshake with first hop
Jan 29 14:30:43.000 [notice] Bootstrapped 90%: Establishing a Tor circuit
Jan 29 14:30:43.000 [notice] Bootstrapped 100%: Done
torIsBootstrapped(1)
If this takes too long --> CTRL+c, reboot and check manually
OK - Tor Bootstrap is ready

*** Changing bitcoin Config ***
Only Connect thru TOR
onlynet=onion
Adding some bitcoin onion nodes to connect to
addnode=fno4aakpl6sg6y47.onion
addnode=toguvy5upyuctudx.onion
addnode=ndndword5lpb7eex.onion
addnode=6m2iqgnqjxh7ulyk.onion
addnode=5tuxetn7tar3q5kp.onion
*** bitcoin re-init - Waiting for Onion Address ***
restarting bitcoind ...
--- Checking 2 ---
1548772262
2019-01-29T13:57:22Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements
2019-01-29T13:58:22Z torcontrol thread start
2019-01-29T14:30:51Z tor: Thread interrupt
2019-01-29T14:30:51Z torcontrol thread exit
2019-01-29T14:30:54Z Assuming ancestors of block 0000000000000000002e63058c023a9a1de233554f28c7b21380b6c9003f36a8 have valid signatures.
2019-01-29T14:30:54Z Default data directory /home/bitcoin/.bitcoin
2019-01-29T14:30:54Z Using data directory /mnt/hdd/bitcoin
2019-01-29T14:30:54Z Using at most 40 automatic connections (1024 file descriptors available)
2019-01-29T14:30:54Z Using 16 MiB out of 32/2 requested for signature cache, able to store 524288 elements
2019-01-29T14:30:54Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements
error code: -28
error message:
Loading block index...
Can take up to 20min - if this takes longer --> CTRL+c, reboot and check manually
--- Checking 2 ---
1548772267
2019-01-29T13:57:22Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements
2019-01-29T13:58:22Z torcontrol thread start
2019-01-29T14:30:51Z tor: Thread interrupt
2019-01-29T14:30:51Z torcontrol thread exit
2019-01-29T14:30:54Z Assuming ancestors of block 0000000000000000002e63058c023a9a1de233554f28c7b21380b6c9003f36a8 have valid signatures.
2019-01-29T14:30:54Z Default data directory /home/bitcoin/.bitcoin
2019-01-29T14:30:54Z Using data directory /mnt/hdd/bitcoin
2019-01-29T14:30:54Z Using at most 40 automatic connections (1024 file descriptors available)
2019-01-29T14:30:54Z Using 16 MiB out of 32/2 requested for signature cache, able to store 524288 elements
2019-01-29T14:30:54Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements
error code: -28
error message:
Loading block index...
Can take up to 20min - if this takes longer --> CTRL+c, reboot and check manually
--- Checking 2 ---
1548772272
2019-01-29T13:57:22Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements
2019-01-29T13:58:22Z torcontrol thread start
2019-01-29T14:30:51Z tor: Thread interrupt
2019-01-29T14:30:51Z torcontrol thread exit
2019-01-29T14:30:54Z Assuming ancestors of block 0000000000000000002e63058c023a9a1de233554f28c7b21380b6c9003f36a8 have valid signatures.
2019-01-29T14:30:54Z Default data directory /home/bitcoin/.bitcoin
2019-01-29T14:30:54Z Using data directory /mnt/hdd/bitcoin
2019-01-29T14:30:54Z Using at most 40 automatic connections (1024 file descriptors available)
2019-01-29T14:30:54Z Using 16 MiB out of 32/2 requested for signature cache, able to store 524288 elements
2019-01-29T14:30:54Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements
error code: -28
error message:
Rewinding blocks...
Can take up to 20min - if this takes longer --> CTRL+c, reboot and check manually
--- Checking 2 ---
1548772277
2019-01-29T13:57:22Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements
2019-01-29T13:58:22Z torcontrol thread start
2019-01-29T14:30:51Z tor: Thread interrupt
2019-01-29T14:30:51Z torcontrol thread exit
2019-01-29T14:30:54Z Assuming ancestors of block 0000000000000000002e63058c023a9a1de233554f28c7b21380b6c9003f36a8 have valid signatures.
2019-01-29T14:30:54Z Default data directory /home/bitcoin/.bitcoin
2019-01-29T14:30:54Z Using data directory /mnt/hdd/bitcoin
2019-01-29T14:30:54Z Using at most 40 automatic connections (1024 file descriptors available)
2019-01-29T14:30:54Z Using 16 MiB out of 32/2 requested for signature cache, able to store 524288 elements
2019-01-29T14:30:54Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements
error code: -28
error message:
Verifying blocks...
Can take up to 20min - if this takes longer --> CTRL+c, reboot and check manually
--- Checking 2 ---
1548772282
2019-01-29T14:30:51Z tor: Thread interrupt
2019-01-29T14:30:51Z torcontrol thread exit
2019-01-29T14:30:54Z Assuming ancestors of block 0000000000000000002e63058c023a9a1de233554f28c7b21380b6c9003f36a8 have valid signatures.
2019-01-29T14:30:54Z Default data directory /home/bitcoin/.bitcoin
2019-01-29T14:30:54Z Using data directory /mnt/hdd/bitcoin
2019-01-29T14:30:54Z Using at most 40 automatic connections (1024 file descriptors available)
2019-01-29T14:30:54Z Using 16 MiB out of 32/2 requested for signature cache, able to store 524288 elements
2019-01-29T14:30:54Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements
2019-01-29T14:31:20Z torcontrol thread start
2019-01-29T14:31:20Z tor: Got service ID kxs4wmwoesb3z4e4, advertising service kxs4wmwoesb3z4e4.onion:8333
Can take up to 20min - if this takes longer --> CTRL+c, reboot and check manually
Your Chain Network Onion Address is: kxs4wmwoesb3z4e4.onion:8333

*** Setting your Onion Address ***
Your Lightning Tor Onion Address is: mtgob7h2hupq7fqzp3egnayz2xvbam5d24ibm35dmr2jnsxwx7jfqcid.onion:9735

*** Putting LND behind TOR ***
Disable LND again
Removed /etc/systemd/system/multi-user.target.wants/lnd.service.
Writing Public Onion Address to /run/publicip (just in case for TotHiddenServiceV3)
PUBLICIP=mtgob7h2hupq7fqzp3egnayz2xvbam5d24ibm35dmr2jnsxwx7jfqcid.onion
Configure and Changing to lnd.tor.service
sed: can't read ./assets/lnd.tor.service: No such file or directory
sed: can't read ./assets/lnd.tor.service: No such file or directory
cp: cannot stat '/home/admin/assets/lnd.tor.service': No such file or directory
Enable LND again
Created symlink /etc/systemd/system/multi-user.target.wants/lnd.service → /etc/systemd/system/lnd.service.
OK

*** Finshing Setup / REBOOT ***
OK - all should be set

PRESS ENTER ... to REBOOT

